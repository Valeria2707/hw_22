const data=[{name:"Volodymyr",password:"Volod105",age:21,mail:"volodymyr.kovalchuk@gmail.com",mobile_phone:380954512784,bank_card:4411444113154567,id:0},{name:"Andriy",password:"qwerty123",age:22,mail:"lil_gangsta@gmail.com",mobile_phone:380954412945,bank_card:4411444117848547,id:1},{name:"Olya",password:"Olenasag04",age:18,mail:"sagaidakolena@gmail.com",mobile_phone:380957714523,bank_card:4411444112374621,id:2}];null===localStorage.getItem("peopleInf")&&localStorage.setItem("peopleInf",JSON.stringify(data));let peopleInf=JSON.parse(localStorage.getItem("peopleInf"))||[];function showPeopleList(){const a=document.querySelector(".peopleList");a.innerHTML="";for(let b=0;b<peopleInf.length;b++){const c=document.createElement("div");c.classList.add("blockPeople"),a.appendChild(c);const d=document.createElement("div");d.classList.add("blockNameAge"),c.appendChild(d);const e=document.createElement("div");e.classList.add("blockMoreInfo"),e.setAttribute("id",`${peopleInf[b].id}`),c.appendChild(e);const f=document.createElement("div");f.classList.add("peopleName"),f.textContent="Name: "+peopleInf[b].name,d.appendChild(f);const g=document.createElement("div");g.textContent="Age: "+peopleInf[b].age,d.appendChild(g);const h=document.createElement("div");h.classList.add("blockBtn"),c.appendChild(h);const i=document.createElement("button");i.textContent="View",i.classList.add("btnView"),i.setAttribute("id",`${peopleInf[b].id}`),h.appendChild(i),i.addEventListener("click",showMoreInf);const j=document.createElement("button");j.textContent="Edit",j.classList.add("btnEdit"),j.setAttribute("id",`${peopleInf[b].id}`),h.appendChild(j),j.addEventListener("click",editInfo);const k=document.createElement("button");k.textContent="Delete",k.classList.add("btnDelete"),k.setAttribute("id",`${peopleInf[b].id}`),h.appendChild(k),k.addEventListener("click",requestDelete)}emptyList()}function emptyList(){if(0>=peopleInf.length){const a=document.querySelector(".peopleList"),b=document.createElement("div");b.textContent="LIST EMPTY!",b.style.fontSize="30px",b.style.marginLeft="auto",b.style.marginRight="auto",a.appendChild(b)}}function requestDelete(a){const b=a.target.getAttribute("id"),c=document.querySelector(".confirmation");c.style.display="block";const d=document.querySelector(".yes");d.setAttribute("id",b),d.addEventListener("click",deletePeople);const e=document.querySelector(".no");e.addEventListener("click",cancelDeletePeople)}function deletePeople(a){const b=document.querySelector(".confirmation");b.style.display="none";const c=a.target.getAttribute("id"),d=JSON.parse(localStorage.getItem("peopleInf")).filter(a=>a.id!=c);peopleInf=d,localStorage.setItem("peopleInf",JSON.stringify(peopleInf)),showPeopleList()}function cancelDeletePeople(){const a=document.querySelector(".confirmation");a.style.display="none"}function editInfo(a){const b=a.target.getAttribute("id"),c=document.querySelector(".editAndAdd");c.style.display="block";const d=peopleInf[b];document.querySelector(".textName").value=peopleInf.name||d.name,document.querySelector(".textAge").value=peopleInf.age||d.age,document.querySelector(".textPassword").value=peopleInf.password||d.password,document.querySelector(".textMail").value=peopleInf.mail||d.mail,document.querySelector(".textPhone").value=peopleInf.mobile_phone||d.mobile_phone,document.querySelector(".textCard").value=peopleInf.bank_card||d.bank_card;const e=document.querySelector(".btnSavePeople");e.style.display="none";const f=document.querySelector(".btnSave");f.style.display="block",f.setAttribute("id",b),f.addEventListener("click",saveNewInfo);const g=document.querySelector(".btnClose");g.addEventListener("click",closeForm)}function closeForm(){const a=document.querySelector(".editAndAdd");a.style.display="none"}function saveNewInfo(a){const b=a.target.getAttribute("id"),c=peopleInf[b],d=document.querySelector(".textName").value,e=document.querySelector(".textAge").value,f=document.querySelector(".textPassword").value,g=document.querySelector(".textMail").value,h=document.querySelector(".textPhone").value,i=document.querySelector(".textCard").value,j=/^\d{1,2}$/,k=/^\d{9,15}$/,l=/^[a-zA-Zа-яА-Я'][a-zA-Zа-яА-Я-' ]+[a-zA-Zа-яА-Я']?$/u,m=/^[\w ]+$/,n=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/,o=/^\d{16}$/,p=document.querySelector(".textAge"),q=document.querySelector(".textPhone"),r=document.querySelector(".textMail"),s=document.querySelector(".textCard"),t=document.querySelector(".textName"),u=document.querySelector(".textPassword");if(p.classList.remove("Error"),s.classList.remove("Error"),r.classList.remove("Error"),q.classList.remove("Error"),t.classList.remove("Error"),u.classList.remove("Error"),j.test(e)&&k.test(h)&&n.test(g)&&o.test(i)&&l.test(d)&&m.test(f)){c.bank_card=i,c.mobile_phone=h,c.mail=g,c.password=f,c.age=e,c.name=d,localStorage.setItem("peopleInf",JSON.stringify(peopleInf));const a=document.querySelector(".editAndAdd");a.style.display="none",showPeopleList()}!1===j.test(e)&&p.classList.add("Error"),!1===k.test(h)&&q.classList.add("Error"),!1===n.test(g)&&r.classList.add("Error"),!1===o.test(i)&&s.classList.add("Error"),!1===l.test(d)&&t.classList.add("Error"),!1===m.test(f)&&u.classList.add("Error")}function showMoreInf(a){const b=a.target.getAttribute("id"),c=document.getElementById(`${b}`),d=peopleInf[b];c.innerHTML="";const e=document.createElement("div");e.textContent="Password: "+d.password,c.appendChild(e);const f=document.createElement("div");f.textContent="Mail: "+d.mail,c.appendChild(f);const g=document.createElement("div");g.textContent="Mobile Phone: "+d.mobile_phone,c.appendChild(g);const h=document.createElement("div");h.textContent="Bank Card: "+d.bank_card,c.appendChild(h)}function clickButtonAdd(){const a=document.querySelector(".buttonAdd");a.addEventListener("click",createNewPeople)}function createNewPeople(){const a=document.querySelector(".editAndAdd");a.style.display="block",document.querySelector(".textName").value="",document.querySelector(".textAge").value="",document.querySelector(".textPassword").value="",document.querySelector(".textMail").value="",document.querySelector(".textPhone").value="",document.querySelector(".textCard").value="";const b=document.querySelector(".btnSavePeople"),c=document.querySelector(".btnSave");c.style.display="none",b.style.display="block",b.addEventListener("click",saveNewPeople);const d=document.querySelector(".btnClose");d.addEventListener("click",closeForm)}function saveNewPeople(){const a=document.querySelector(".textName").value,b=document.querySelector(".textAge").value,c=document.querySelector(".textPassword").value,d=document.querySelector(".textMail").value,e=document.querySelector(".textPhone").value,f=document.querySelector(".textCard").value,g=/^\d{1,2}$/,h=/^[a-zA-Zа-яА-Я'][a-zA-Zа-яА-Я-' ]+[a-zA-Zа-яА-Я']?$/u,i=/^[\w ]+$/,j=/^\d{9,15}$/,k=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/,l=/^\d{16}$/,m=document.querySelector(".textAge"),n=document.querySelector(".textPhone"),o=document.querySelector(".textMail"),p=document.querySelector(".textCard"),q=document.querySelector(".textName"),r=document.querySelector(".textPassword");if(m.classList.remove("Error"),p.classList.remove("Error"),o.classList.remove("Error"),n.classList.remove("Error"),q.classList.remove("Error"),r.classList.remove("Error"),g.test(b)&&j.test(e)&&k.test(d)&&l.test(f)&&h.test(a)&&i.test(c))if(0>=peopleInf.length){peopleInf.push({name:a,password:c,age:b,mail:d,mobile_phone:e,bank_card:f,id:0}),localStorage.setItem("peopleInf",JSON.stringify(peopleInf));const g=document.querySelector(".editAndAdd");g.style.display="none",showPeopleList()}else{const g={name:a,password:c,age:b,mail:d,mobile_phone:e,bank_card:f,id:peopleInf[peopleInf.length-1].id+1};peopleInf.push(g),localStorage.setItem("peopleInf",JSON.stringify(peopleInf));const h=document.querySelector(".editAndAdd");h.style.display="none",showPeopleList()}!1===g.test(b)&&m.classList.add("Error"),!1===j.test(e)&&n.classList.add("Error"),!1===k.test(d)&&o.classList.add("Error"),!1===l.test(f)&&p.classList.add("Error"),!1===h.test(a)&&q.classList.add("Error"),!1===i.test(c)&&r.classList.add("Error")}showPeopleList(),clickButtonAdd();